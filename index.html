/* equip/unequip handlers */
document.getElementById('unequipWeapon').addEventListener('click', ()=>{
  state.inventory.weapon = null;
  renderInventory();
  saveState();
});

document.getElementById('unequipArmor').addEventListener('click', ()=>{
  state.inventory.armor = null;
  renderInventory();
  saveState();
});

document.getElementById('unequipCosmetic').addEventListener('click', ()=>{
  state.inventory.cosmetic = null;
  renderInventory();
  saveState();
});

/* Render inventory icons */
function renderInventory(){
  const w = document.getElementById('slotWeapon');
  const a = document.getElementById('slotArmor');
  const c = document.getElementById('slotCosmetic');

  w.textContent = state.inventory.weapon ? state.inventory.weapon.name : "Arma";
  a.textContent = state.inventory.armor ? state.inventory.armor.name : "Armadura";
  c.textContent = state.inventory.cosmetic ? state.inventory.cosmetic.name : "Cosmético";
}

/* Export state */
document.getElementById('btnExportState').addEventListener('click', ()=>{
  const data = JSON.stringify(state, null, 2);
  navigator.clipboard.writeText(data).then(()=>{
    alert("Estado copiado para a área de transferência!");
  });
});

/* End month */
document.getElementById('btnEndMonth').addEventListener('click', ()=>{
  logAdd("Mês finalizado! Boss derrotado.");
  addXP(120);
});

/* INITIALIZATION */
function init(){
  loadState();
  renderStats();
  renderTasks();
  renderInventory();
  renderNextMonster();
  renderLogs();
}
init();
