<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Preview — Artes do Grimório (RPG de Tarefas)</title>
<style>
  :root{
    --bg:#12021a; --panel:#1b1026; --accent:#8a4efd; --paper:#f0d88a;
    --common:#9e9e9e; --rare:#4aa3ff; --epic:#8a4efd; --legend:#d4af37;
    --txt:#efe9ff;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,var(--bg),#2b0a44);color:var(--txt);-webkit-font-smoothing:antialiased}
  .wrap{max-width:1200px;margin:18px auto;padding:12px}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px}
  h1{margin:0;font-size:20px;color:var(--accent)}
  .desc{color:#d6cff0;font-size:13px}
  .controls{display:flex;gap:8px;align-items:center}
  .btn{background:var(--accent);color:#110;padding:8px 10px;border-radius:8px;border:none;font-weight:700;cursor:pointer}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:12px;margin-top:12px}
  .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.03));padding:12px;border-radius:12px;display:flex;gap:12px;align-items:center}
  .art{width:128px;height:128px;border-radius:6px;flex:0 0 128px;display:flex;align-items:center;justify-content:center; background:linear-gradient(180deg,#fff1,#ffffff00)}
  .meta{flex:1}
  .name{font-weight:800}
  .rar{display:inline-block;padding:4px 8px;border-radius:6px;margin-top:6px;font-weight:800;color:#111}
  .poem{color:#cfc6ff;margin-top:8px;font-style:italic}
  .sectionTitle{margin-top:22px;color:var(--accent);font-weight:800}
  footer{color:#a99bbf;margin-top:18px;text-align:center}
  @media(max-width:760px){ .grid{grid-template-columns:1fr} .card{flex-direction:row} .art{margin:auto 0} }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <h1>Grimório — Visualização de Artes</h1>
      <div class="desc">Preview das artes que irão para o PDF. Cada imagem é gerada em SVG 128×128 (pixel-like) — cores por raridade.</div>
    </div>
    <div class="controls">
      <button id="btnToggleTheme" class="btn">Alternar Tema (claro/escuro)</button>
    </div>
  </header>

  <div id="content"></div>

  <footer>Grimório das Artes do RPG de Tarefas — Registro dos efeitos e visuais do herói das tarefas</footer>
</div>

<script>
/* ========= DATA: todos os itens que entrariam no PDF =========
   Cada item: { section, name, rarity (common/rare/epic/legend), desc, type }
   We'll render them 3 por "página" visualmente grouped by section.
*/

const ITEMS = [];

/* helper to push variants for weapons and armors */
function pushWeaponVariants(baseName, shortname){
  const rarities = [
    {k:'common', nameSuffix:'(Comum)', color:'--common'},
    {k:'rare', nameSuffix:'(Raro)', color:'--rare'},
    {k:'epic', nameSuffix:'(Épica)', color:'--epic'},
    {k:'legend', nameSuffix:'(Lendária)', color:'--legend'}
  ];
  rarities.forEach(r=>{
    ITEMS.push({
      section: 'Armas',
      category: shortname,
      name: `${baseName} ${r.nameSuffix}`,
      rarity: r.k,
      rarityLabel: r.nameSuffix.replace(/[()]/g,''),
      desc: poeticDesc(shortname, r.k)
    });
  });
}

function pushArmorVariants(baseName){
  const rarities = ['common','rare','epic','legend'];
  rarities.forEach(r=>{
    ITEMS.push({
      section: 'Armaduras',
      category: baseName,
      name: `${baseName} ${labelFromRarity(r)}`,
      rarity: r,
      rarityLabel: labelFromRarity(r).replace(/[()]/g,''),
      desc: poeticDesc(baseName, r)
    });
  });
}

/* small utility functions */
function labelFromRarity(k){
  if(k==='common') return '(Comum)';
  if(k==='rare') return '(Raro)';
  if(k==='epic') return '(Épica)';
  if(k==='legend') return '(Lendária)';
  return '';
}
function poeticDesc(kind, rarity){
  const map = {
    'espada':'A lâmina canta com ecos de dias antigos.',
    'cajado':'O cetro murmura versos de vento e estrelas.',
    'machado':'O corte ressoa como batida de martelo ancestral.',
    'arco':'A corda vibra com segredos de florestas antigas.',
    'foice':'A lâmina sussurra colheitas e despedidas.',
    'lança':'A ponta corta o ar, perfurando o destino.',
    'armadura':'As placas guardam memórias de batalhas e juramentos.',
    'pijama':'Tecido lilás que envolve o corpo em promessas de aurora.',
    'graveto':'Um começo humilde que guarda grande vontade.'
  };
  let base = map[kind] || map['armadura'];
  // add rarity flavor
  if(rarity==='rare') base += ' Uma luz tenue adorna o metal.';
  if(rarity==='epic') base += ' Runas suaves cintilam, despertando poder.';
  if(rarity==='legend') base += ' Uma aura eterna pulsa, como estrela aprisionada.';
  return base;
}

/* Create list: Pijama + Graveto */
ITEMS.push({
  section:'Equipamento Inicial',
  category:'pijama',
  name:'Pijama do Herói (Comum)',
  rarity:'common',
  rarityLabel:'Comum',
  desc:'Traje lilás justo ao corpo. A veste do início, onde toda jornada começa.'
});
ITEMS.push({
  section:'Equipamento Inicial',
  category:'graveto',
  name:'Graveto Inicial (Comum)',
  rarity:'common',
  rarityLabel:'Comum',
  desc:'Graveto simples que guiará o primeiro golpe do herói.'
});

/* Weapons: espada, cajado, machado, arco, foice, lança */
pushWeaponVariants('Espada', 'espada');
pushWeaponVariants('Cajado', 'cajado');
pushWeaponVariants('Machado', 'machado');
pushWeaponVariants('Arco', 'arco');
pushWeaponVariants('Foice', 'foice');
pushWeaponVariants('Lança', 'lança');

/* Armors: a lista expandida inspirada nas armas */
const armorModels = ['Túnica do Aventureiro','Armadura do Guardião','Armadura do Caçador','Armadura do Feiticeiro','Armadura do Cavaleiro das Runas','Couraça Estelar'];
armorModels.forEach(a=> pushArmorVariants(a));

/* Cosmetics: chapéus e capas, 4 variações each */
const cosmetics = [
  {section:'Cosméticos', category:'Capa', name:'Capa (Curta)'},
  {section:'Cosméticos', category:'Capa', name:'Capa (Longa)'},
  {section:'Cosméticos', category:'Capa', name:'Capa (Mística)'},
  {section:'Cosméticos', category:'Capa', name:'Capa (Rúnica)'},
  {section:'Cosméticos', category:'Chapéu', name:'Chapéu (Aventureiro)'},
  {section:'Cosméticos', category:'Chapéu', name:'Chapéu (Mago)'},
  {section:'Cosméticos', category:'Chapéu', name:'Chapéu (Elmo)'},
  {section:'Cosméticos', category:'Chapéu', name:'Tiara (Nobre)'}
];
cosmetics.forEach((c, i)=>{
  const rarities = ['common','rare','epic','legend'];
  rarities.forEach(r=>{
    ITEMS.push({
      section:c.section,
      category:c.category,
      name: `${c.name} ${labelFromRarity(r)}`,
      rarity:r,
      rarityLabel: labelFromRarity(r).replace(/[()]/g,''),
      desc: poeticDesc(c.category.toLowerCase(), r)
    });
  });
});

/* Now we have a big ITEMS array. We'll render grouped by section, 3 per "visual row" */
/* Utility to create SVG dataURI for a simple pixel-like icon */
function svgForItem(it){
  const size = 128;
  // rarity border color
  let borderColor = getComputedStyle(document.documentElement).getPropertyValue('--common').trim();
  if(it.rarity==='common') borderColor = getComputedStyle(document.documentElement).getPropertyValue('--common').trim();
  if(it.rarity==='rare') borderColor = getComputedStyle(document.documentElement).getPropertyValue('--rare').trim();
  if(it.rarity==='epic') borderColor = getComputedStyle(document.documentElement).getPropertyValue('--epic').trim();
  if(it.rarity==='legend') borderColor = getComputedStyle(document.documentElement).getPropertyValue('--legend').trim();
  // choose fill based on category/type
  const palette = {
    'espada':['#dcdcdc','#9fb4ff','#c084fc','#ffd166'],
    'cajado':['#bcae9a','#8ad0ff','#b78bff','#ffd166'],
    'machado':['#d4c4b7','#93b8ff','#a36bff','#ffd166'],
    'arco':['#cfe3bd','#80c1ff','#b08aff','#ffd166'],
    'foice':['#ccc0b8','#7fb4ff','#b086ff','#ffd166'],
    'lança':['#d6d6d6','#86c7ff','#b48cff','#ffd166'],
    'armadura':['#bfbfbf','#7fb8ff','#9f7bff','#ffd166'],
    'pijama':['#d7b6f2','#e6c9ff','#f0dbff','#f7eaff'],
    'graveto':['#c49a6c','#bfa58a','#e0c6b0','#f3e3d0'],
    'Capa':['#c4b0ff','#b0e1ff','#d6b8ff','#ffe6a8'],
    'Chapéu':['#d3c4ff','#9fdcff','#e0c0ff','#fff0b8']
  };
  const cat = it.category || 'armadura';
  const basePalette = palette[cat] || palette['armadura'];
  let fill = basePalette[0];
  if(it.rarity==='rare') fill = basePalette[1];
  if(it.rarity==='epic') fill = basePalette[2];
  if(it.rarity==='legend') fill = basePalette[3];

  // create a simple SVG showing an icon and the item short label
  const shortLabel = (it.category || it.name).slice(0,12);
  const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='${size}' height='${size}' viewBox='0 0 ${size} ${size}'>
    <rect x='0' y='0' width='${size}' height='${size}' fill='#fff0' />
    <rect x='4' y='4' width='${size-8}' height='${size-8}' rx='8' ry='8' fill='${fill}' stroke='${borderColor}' stroke-width='6'/>
    <!-- pixel-like sprite: a few rects -->
    <g transform='translate(18,18) scale(0.9)'>
      ${svgIconForCategory(cat, it.rarity)}
    </g>
    <text x='64' y='118' font-size='9' fill='#1a0e23' font-family='monospace' text-anchor='middle'>${escapeXml(shortLabel)}</text>
  </svg>`;
  return 'data:image/svg+xml;utf8,' + encodeURIComponent(svg);
}

/* small pixel-style icon definitions (returns svg rects) */
function svgIconForCategory(cat, rarity){
  // produce different shapes per cat
  if(cat === 'espada'){
    return `<rect x='28' y='6' width='12' height='48' fill='#2b1b2f' rx='2'/><polygon points='34,0 44,14 24,14' fill='#ffd'/>`;
  }
  if(cat === 'cajado'){
    return `<rect x='40' y='6' width='8' height='48' fill='#2b2a1b' rx='2'/><circle cx='44' cy='-4' r='8' fill='#ffd'/>`;
  }
  if(cat === 'machado'){
    return `<rect x='34' y='34' width='28' height='10' fill='#3a2a2a' rx='2'/><rect x='36' y='6' width='8' height='36' fill='#4b2f1f'/>`;
  }
  if(cat === 'arco'){
    return `<path d='M12 20 q40 -30 80 0 q-10 10 -80 0 z' fill='#2b2b2b'/><rect x='86' y='20' width='4' height='40' fill='#6b3b1f'/>`;
  }
  if(cat === 'foice'){
    return `<path d='M20 8 q40 10 32 44 q-20 8 -32 2 z' fill='#2b2b2b'/><rect x='54' y='36' width='6' height='30' fill='#6b3b1f'/>`;
  }
  if(cat === 'lança'){
    return `<rect x='44' y='6' width='4' height='58' fill='#3a2a2a'/><polygon points='46,0 60,16 32,16' fill='#ffd'/>`;
  }
  if(cat.toLowerCase().includes('armadur') || cat==='armadura'){
    return `<rect x='22' y='18' width='60' height='68' rx='8' fill='#fff2' stroke='#2b1b2f' stroke-width='1'/><rect x='36' y='36' width='36' height='36' fill='#2b2b2b' opacity='0.1'/>`;
  }
  if(cat==='pijama'){
    return `<rect x='28' y='18' width='48' height='56' rx='6' fill='#fff2' stroke='#2b1b2f' stroke-width='0.6'/><circle cx='52' cy='28' r='12' fill='#2b1b2f' opacity='0.5'/>`;
  }
  if(cat==='graveto'){
    return `<rect x='58' y='6' width='6' height='66' fill='#7b5a3a' rx='3'/><rect x='52' y='6' width='14' height='8' fill='#a07850'/>`;
  }
  if(cat==='Capa' || cat.toLowerCase()==='capa'){
    return `<path d='M12 12 q50 50 100 0 v60 h-100 z' fill='#3b2b5b'/>`;
  }
  if(cat==='Chapéu' || cat.toLowerCase()==='chapéu'){
    return `<ellipse cx='64' cy='34' rx='34' ry='12' fill='#2b2b2b'/><rect x='46' y='34' width='36' height='24' rx='6' fill='#3b2b5b'/>`;
  }
  // fallback
  return `<rect x='30' y='18' width='68' height='68' fill='#2b2b2b'/>`;
}

function escapeXml(s){
  return s.replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

/* Colors for rarity badges */
function rarityColor(r){
  if(r==='common') return getComputedStyle(document.documentElement).getPropertyValue('--common').trim();
  if(r==='rare') return getComputedStyle(document.documentElement).getPropertyValue('--rare').trim();
  if(r==='epic') return getComputedStyle(document.documentElement).getPropertyValue('--epic').trim();
  if(r==='legend') return getComputedStyle(document.documentElement).getPropertyValue('--legend').trim();
  return getComputedStyle(document.documentElement).getPropertyValue('--common').trim();
}

/* Render grouped by section, 3 cards per row (but grid will auto layout) */
function render(){
  const content = document.getElementById('content');
  // group by section
  const sections = {};
  ITEMS.forEach(it=>{
    if(!sections[it.section]) sections[it.section]=[];
    sections[it.section].push(it);
  });
  // render each section
  for(const secName of Object.keys(sections)){
    const sec = document.createElement('div');
    sec.innerHTML = `<div class="sectionTitle">${secName}</div>`;
    const grid = document.createElement('div');
    grid.className = 'grid';
    sections[secName].forEach(it=>{
      const card = document.createElement('div'); card.className='card';
      const art = document.createElement('div'); art.className='art';
      const img = document.createElement('img'); img.width=128; img.height=128;
      img.src = svgForItem(it);
      img.style.borderRadius='6px';
      art.appendChild(img);
      const meta = document.createElement('div'); meta.className='meta';
      meta.innerHTML = `<div class="name">${it.name}</div><div class="rar" style="background:${rarityColor(it.rarity)}">${it.rarityLabel}</div><div class="poem">${it.desc}</div>`;
      card.appendChild(art);
      card.appendChild(meta);
      grid.appendChild(card);
    });
    sec.appendChild(grid);
    content.appendChild(sec);
  }
}

/* Toggle theme (light/dark) to preview both versions quickly */
document.getElementById('btnToggleTheme').addEventListener('click', ()=>{
  const root = document.documentElement;
  if(root.style.getPropertyValue('--bg') === '#12021a' || !root.style.getPropertyValue('--bg')) {
    // switch to light-ish parchment preview
    root.style.setProperty('--bg','#efe6d0');
    root.style.setProperty('--panel','#fff8ea');
    root.style.setProperty('--txt','#231b20');
    root.style.setProperty('--accent','#5b3a9a');
    root.style.setProperty('--common','#9e9e9e');
    root.style.setProperty('--rare','#4aa3ff');
    root.style.setProperty('--epic','#8a4efd');
    root.style.setProperty('--legend','#d4af37');
  } else {
    root.style.setProperty('--bg','#12021a');
    root.style.setProperty('--panel','#1b1026');
    root.style.setProperty('--txt','#efe9ff');
    root.style.setProperty('--accent','#8a4efd');
    root.style.setProperty('--common','#9e9e9e');
    root.style.setProperty('--rare','#4aa3ff');
    root.style.setProperty('--epic','#8a4efd');
    root.style.setProperty('--legend','#d4af37');
  }
  // re-render images to pick up CSS variable changes (borders)
  // rebuild gallery
  document.getElementById('content').innerHTML='';
  render();
});

render();

</script>
</body>
</html>
